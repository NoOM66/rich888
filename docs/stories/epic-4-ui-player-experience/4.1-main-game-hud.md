# Story 4.1: Implement Main Game HUD

**Epic:** UI & Player Experience

## 1. Story
ในฐานะผู้เล่น (As a player), ฉันต้องการ Heads-Up Display (HUD) ที่ชัดเจนและมองเห็นได้ตลอดเวลา (I want a clear and always-visible Heads-Up Display) ซึ่งแสดงค่าสถานะหลัก, เงินสดปัจจุบัน, สัปดาห์ของเกม, และงบเวลาที่เหลือ (that shows my core stats, current money, the game week, and my remaining time budget) เพื่อที่ฉันจะได้เข้าใจสถานะของตัวละครได้อย่างรวดเร็วและตัดสินใจได้อย่างมีข้อมูล (so I can quickly understand my character's status and make informed decisions).

## 2. Acceptance Criteria (เกณฑ์การยอมรับ)
- [ ] มี `MainHUDManager.cs` Script ในโปรเจกต์ และจัดการ HUD หลักของเกม
- [ ] HUD แสดงค่าสถานะ Money, Health, Happiness, และ Education อย่างชัดเจน
- [ ] HUD แสดงสัปดาห์/วันที่ปัจจุบันของเกม
- [ ] HUD แสดงจำนวนเงินสดปัจจุบันของผู้เล่น
- [ ] HUD แสดง "งบเวลา" ที่เหลือสำหรับสัปดาห์ปัจจุบัน
- [ ] ค่าที่แสดงทั้งหมดบน HUD จะต้องอัปเดตแบบ Real-time เมื่อมีการเปลี่ยนแปลงในเกม
- [ ] HUD จะต้องแสดงผลอยู่ตลอดเวลาในระหว่างการเล่นเกม

## 3. Tasks / Subtasks (งานย่อย)
- [ ] **1. สร้าง Canvas และ UI Elements สำหรับ HUD:**
  - [ ] 1.1. สร้าง UI Canvas ใหม่ใน Unity Scene
  - [ ] 1.2. เพิ่ม Text (TextMeshPro) สำหรับแสดงค่า: Money, Health, Happiness, Education, Current Week, Time Budget
  - [ ] 1.3. จัดวางและจัดสไตล์ UI Elements เหล่านี้บนหน้าจอให้เหมาะสม

- [ ] **2. สร้าง MainHUDManager Script:**
  - [ ] 2.1. สร้าง C# Script ใหม่ชื่อ `MainHUDManager.cs` และทำให้เป็น Singleton
  - [ ] 2.2. เพิ่ม `[SerializeField]` fields เพื่อเชื่อมโยงกับ UI Text Elements ใน Inspector

- [ ] **3. พัฒนากลไกการอัปเดต UI:**
  - [ ] 3.1. ให้ `MainHUDManager` ดักฟัง Event จาก Global Event System:
    - [ ] `OnStatChanged` (จาก `PlayerStatsController`)
    - [ ] `OnWeekStart` (จาก `TurnManager`)
    - [ ] `OnWeekEnd` (จาก `TurnManager`)
  - [ ] 3.2. เมื่อได้รับ Event `OnStatChanged`, ให้อัปเดต Text ของค่าสถานะที่เกี่ยวข้อง
  - [ ] 3.3. เมื่อได้รับ Event `OnWeekStart` หรือ `OnWeekEnd`, ให้อัปเดต Text ของสัปดาห์ปัจจุบันและงบเวลา

- [ ] **4. กำหนดค่าเริ่มต้นของ HUD:**
  - [ ] 4.1. ในฟังก์ชัน `Start()` ของ `MainHUDManager`, ให้ดึงค่าเริ่มต้นจาก `PlayerStatsController` และ `TurnManager` มาแสดงบน HUD

- [ ] **5. เขียน Unit Tests (UI Integration Tests):**
  - [ ] 5.1. เทสว่า UI Elements แสดงค่าเริ่มต้นได้ถูกต้อง
  - [ ] 5.2. เทสว่า UI Elements อัปเดตค่าได้ถูกต้องเมื่อ Event ต่างๆ ถูกยิงพร้อมค่าใหม่

## 4. Dev Notes (บันทึกสำหรับนักพัฒนา)
- การใช้ TextMeshPro จะช่วยให้การแสดงผลข้อความบน UI มีคุณภาพสูงขึ้น
- ควรพิจารณาการใช้ UI Animation เล็กน้อยเมื่อค่าสถานะมีการเปลี่ยนแปลง เพื่อให้ผู้เล่นรับรู้ได้ง่ายขึ้น

## 5. QA / Testing Notes (บันทึกสำหรับ QA และการทดสอบ)
- ทดสอบว่า HUD แสดงผลถูกต้องในทุกสถานะของเกม (MainMenu, GamePlaying, Paused)
- ทดสอบว่าค่าบน HUD อัปเดตถูกต้องเมื่อมีการเปลี่ยนแปลงค่าสถานะ, สัปดาห์, หรืองบเวลา
- ทดสอบการแสดงผลบนหน้าจอขนาดต่างๆ (Resolution)

## 6. Dependencies (สตอรี่ที่เกี่ยวข้อง)
- **Story 1.1: Implement GameManager and State Machine:** HUD จะต้องแสดงผลในสถานะ `GamePlaying`
- **Story 1.2: Implement Turn & Time Management System:** HUD จะต้องแสดงสัปดาห์ปัจจุบันและงบเวลาที่เหลือ
- **Story 1.3: Implement Player Stats System:** HUD จะต้องแสดงค่าสถานะของผู้เล่น
- **Story 1.5: Implement Global Event System:** HUD จะต้องดักฟัง Event จากระบบต่างๆ เพื่ออัปเดตข้อมูล

---
## Dev Agent Record
- **Agent Model Used:**
- **Debug Log References:**
- **Completion Notes:**
- **File List:**
- **Change Log:**
